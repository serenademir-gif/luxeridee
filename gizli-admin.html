<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Admin Paneli | LuxeRide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #0A0A0A; color: white; padding: 50px; }
        .admin-card { background: #1A1A1A; padding: 30px; border-radius: 15px; border-top: 4px solid #00FF99; }
        .btn-taxi { background: #00FF99; color: black; font-weight: bold; }
        #adminPanel { display: none; }
    </style>
</head>
<body>

    <div id="loginScreen" class="container" style="max-width: 400px; text-align: center;">
        <div class="admin-card">
            <h3>üöï Admin Giri≈üi</h3>
            <input type="password" id="pass" class="form-control my-3" placeholder="≈ûifrenizi Girin">
            <button onclick="checkLogin()" class="btn btn-taxi w-100">Giri≈ü Yap</button>
        </div>
    </div>

    <div id="adminPanel" class="container">
        <div class="admin-card">
            <div class="d-flex justify-content-between mb-4">
                <h2>Yorum Y√∂netimi</h2>
                <button onclick="logout()" class="btn btn-outline-danger btn-sm">√áƒ±kƒ±≈ü</button>
            </div>
            <table class="table table-dark">
                <thead>
                    <tr>
                        <th>ƒ∞sim</th>
                        <th>Yorum</th>
                        <th>Puan</th>
                        <th>ƒ∞≈ülem</th>
                    </tr>
                </thead>
                <tbody id="list"></tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // BURAYI DOLDURUN
        const SUPABASE_URL = 'https://zrfhuwhvctzhqatraedl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpyZmh1d2h2Y3R6aHFhdHJhZWRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMTg5NTksImV4cCI6MjA4MTg5NDk1OX0.vW4O_id1ERQRO1jaz25I-w1h3_2N5OBIX2LH0I-vFnM';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        function checkLogin() {
            const pass = document.getElementById('pass').value;
            if(pass === "cakmakliride5334246310") {
                localStorage.setItem('isAuth', 'true');
                showPanel();
            } else { alert("Hatalƒ± ≈üifre!"); }
        }

        function showPanel() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            getComments();
        }

        async function getComments() {
            const { data } = await supabase.from('comments').select('*');
            const tbody = document.getElementById('list');
            tbody.innerHTML = '';
            data.forEach(item => {
                tbody.innerHTML += `<tr>
                    <td>${item.name}</td>
                    <td>${item.content}</td>
                    <td>${item.rating} ‚≠ê</td>
                    <td><button onclick="deleteRow('${item.id}')" class="btn btn-danger btn-sm">Sil</button></td>
                </tr>`;
            });
        }

        async function deleteRow(id) {
            if(confirm("Silinsin mi?")) {
                await supabase.from('comments').delete().eq('id', id);
                getComments();
            }
        }

        function logout() { localStorage.clear(); location.reload(); }
        if(localStorage.getItem('isAuth') === 'true') showPanel();
    </script>
</body>
</html>